<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<title>HOME PAGE</title>
<link rel="stylesheet" href="{{ url_for('static', filename='layout.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='global.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='template.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
<style>
* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: 'Nunito', sans-serif;
    font-weight: 400;
    background: #F1F1F1;
    font-size: 14px;
}

*, html {
    --primaryGradient: linear-gradient(93.12deg, #f70f41 0.52%, #f70f41 100%);
    --secondaryGradient: linear-gradient(268.91deg, #f70f41 -2.14%, #f70f41 99.69%);
    --primaryBoxShadow: 0px 10px 15px rgba(0, 0, 0, 0.1);
    --secondaryBoxShadow: 0px -10px 15px rgba(0, 0, 0, 0.1);
    --primary: #581B98;
}

/* CHATBOX
=============== */
.chatbox {
    position: absolute;
    bottom: 30px;
    right: 30px;
    font-size: 14px;
}

/* CONTENT IS CLOSE */
.chatbox__support {
    display: flex;
    flex-direction: column;
    background: #eee;
    width: 300px;
    height: 350px;
    z-index: -123456;
    opacity: 0;
    transition: all .5s ease-in-out;
}

/* CONTENT ISOPEN */
.chatbox--active {
    transform: translateY(-40px);
    z-index: 123456;
    opacity: 1;

}

/* BUTTON */
.chatbox__button {
    text-align: right;
}

.send__button {
    padding: 6px;
    background: transparent;
    border: none;
    outline: none;
    cursor: pointer;
}


/* HEADER */
.chatbox__header {
    position: sticky;
    top: 0;
    background: orange;
}

/* MESSAGES */
.chatbox__messages {
    margin-top: auto;
    display: flex;
    overflow-y: scroll;
    flex-direction: column-reverse;
}

.messages__item {
    background: orange;
    max-width: 60.6%;
    width: fit-content;
}

.messages__item--operator {
    margin-left: auto;
}

.messages__item--visitor {
    margin-right: auto;
}

/* FOOTER */
.chatbox__footer {
    position: sticky;
    bottom: 0;
}

.chatbox__support {
    background: #f9f9f9;
    height: 450px;
    width: 350px;
    box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.1);
    border-top-left-radius: 20px;
    border-top-right-radius: 20px;
}

/* HEADER */
.chatbox__header {
    background: var(--primaryGradient);
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    padding: 15px 20px;
    border-top-left-radius: 20px;
    border-top-right-radius: 20px;
    box-shadow: var(--primaryBoxShadow);
}

.chatbox__image--header {
    margin-right: 10px;
}

.chatbox__heading--header {
    font-size: 1.2rem;
    color: white;
}

.chatbox__description--header {
    font-size: .9rem;
    color: white;
}

/* Messages */
.chatbox__messages {
    padding: 0 20px;
}

.messages__item {
    margin-top: 10px;
    background: #E0E0E0;
    padding: 8px 12px;
    max-width: 70%;
}

.messages__item--visitor,
.messages__item--typing {
    border-top-left-radius: 20px;
    border-top-right-radius: 20px;
    border-bottom-right-radius: 20px;
}

.messages__item--operator {
    border-top-left-radius: 20px;
    border-top-right-radius: 20px;
    border-bottom-left-radius: 20px;
    background: var(--primary);
    color: white;
}

/* FOOTER */
.chatbox__footer {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
    padding: 20px 20px;
    background: var(--secondaryGradient);
    box-shadow: var(--secondaryBoxShadow);
    border-bottom-right-radius: 10px;
    border-bottom-left-radius: 10px;
    margin-top: 20px;
}

.chatbox__footer input {
    width: 80%;
    border: none;
    padding: 10px 10px;
    border-radius: 30px;
    text-align: left;
}

.chatbox__send--footer {
    color: white;
}

.chatbox__button button,
.chatbox__button button:focus,
.chatbox__button button:visited {
    padding: 10px;
    background: white;
    border: none;
    outline: none;
    border-top-left-radius: 50px;
    border-top-right-radius: 50px;
    border-bottom-left-radius: 50px;
    box-shadow: 0px 10px 15px rgba(0, 0, 0, 0.1);
    cursor: pointer;
}
</style>
</head>
<body>
<div class="container">
    <div class="chatbox">
        <div class="chatbox__support">
            <div class="chatbox__header">
                <div class="chatbox__image--header">
                    <img src="{{ url_for('static', filename='images/book-shop.png') }}" alt="image">
                </div>
                <div class="chatbox__content--header">
                    <h4 class="chatbox__heading--header">MyBookStore.</h4>
                    <p class="chatbox__description--header">Hi.Welcome to MyBookStore. How can I help you?</p>
                </div>
            </div>
            <div class="chatbox__messages">
                <div></div>
            </div>
            <div class="chatbox__footer">
                <input type="text" placeholder="Write a message...">
                <button class="chatbox__send--footer send__button">Send</button>
                 
            </div>
        </div>
        <div class="chatbox__button">
            <button><img src="{{ url_for('static', filename='images/chatbot.png') }}" /></button>
        </div>
    </div>
</div>

<!--Head part-->
<!--网站中间内容开始-->
<div id="main">
    <div class="dd_index_top_adver"><img  src="{{ url_for('static', filename='images/dd_index_top_adver.jpg') }}" alt="ADVERTISER" /></div>
    <!--MIDDLE-->
    <div id="content">
        <!--ADVERTISER SCROLLER-->
        <!--UPDATED-->
        <div class="book_sort">
            <div class="book_new">
                <div class="book_left">Updated</div>
                <div class="book_type" id="history" onmouseover="bookPutUp(0)">History</div>
                <div class="book_type" id="family" onmouseover="bookPutUp(1)">Family</div>
                <div class="book_type" id="culture" onmouseover="bookPutUp(2)">Culture</div>
                <div class="book_type" id="novel" onmouseover="bookPutUp(3)">Novel</div>
                <div class="book_right"><a href="#">More>></a></div>
            </div>
            <div class="book_class" style="height:250px;">
                <!--HISTORY-->
                <dl id="book_history">
                    <dt><img src="{{ url_for('static', filename='images/dd_history_1.jpg')}}" alt="history"/></dt>
                    <dd><div class="book_title">SAPIENS: A BRIEF HISTORY OF HUMANKIND</div><br />
                        by Yuval Noah Harari <br />
                        <div class="book_publish">May 10, 2016</div><br />
                        List Price：$23.00<br />
                        Price Online：$15.00 </dd>
                    <dt><img src="{{ url_for('static', filename='images/dd_history_2.jpg')}}" alt="history"/></dt>
                    <dd><div class="book_title">ON TYRANNY: TWENTY LESSONS FROM THE TWENTIETH CENTURY</div><br />
                        byTimothy Snyder <br />
                        <div class="book_publish">February 28, 2017</div><br />
                        List Price：$11.00<br />
                        Price Online：$8.00 </dd>
                    <dt><img src="{{ url_for('static', filename='images/dd_history_3.jpg')}}" alt="history"/></dt>
                    <dd><div class="book_title">DUNKIRK: THE HISTORY BEHIND THE MAJOR MOTION PICTURE</div><br />
                        byJoshua Levine<br />
                        <div class="book_publish"> June 27, 2017</div><br />
                        List Price：$21.00<br />
                        Price Online：$12.00 </dd>
                    <dt><img src="{{ url_for('static', filename='images/dd_history_4.jpg')}}" alt="history"/></dt>
                    <dd><div class="book_title">NO IS NOT ENOUGH:..</div><br />
                        byNaomi Klein<br />
                        <div class="book_publish">June 5, 2017</div><br />
                        List Price：$25.00<br />
                        Price Online：$20.00 </dd>
                </dl>
                <!--FAMILY-->
                <dl id="book_family" class="book_none">
                   
                    <dt><img src="{{ url_for('static', filename='images/dd_history_3.jpg')}}" alt="history"/></dt>
                    <dd><div class="book_title">DUNKIRK: THE HISTORY BEHIND THE MAJOR MOTION PICTURE</div><br />
                        byJoshua Levine<br />
                        <div class="book_publish"> June 27, 2017</div><br />
                        List Price：$21.00<br />
                        Price Online：$12.00 </dd>
                    <dt><img src="{{ url_for('static', filename='images/dd_history_4.jpg')}}" alt="history"/></dt>
                    <dd><div class="book_title">NO IS NOT ENOUGH: RESISTING THE NEW SHOCK POLITICS AND WINNING..</div><br />
                        byNaomi Klein<br />
                        <div class="book_publish">June 5, 2017</div><br />
                        List Price：$25.00<br />
                        Price Online：$20.00 </dd>
						 <dt><img src="{{ url_for('static', filename='images/dd_history_1.jpg')}}" alt="history"/></dt>
                    <dd><div class="book_title">SAPIENS: A BRIEF HISTORY OF HUMANKIND</div><br />
                        by Yuval Noah Harari <br />
                        <div class="book_publish">May 10, 2016</div><br />
                        List Price：$23.00<br />
                        Price Online：$15.00 </dd>
                    <dt><img src="{{ url_for('static', filename='images/dd_history_2.jpg')}}" alt="history"/></dt>
                    <dd><div class="book_title">ON TYRANNY: TWENTY LESSONS FROM THE TWENTIETH CENTURY</div><br />
                        byTimothy Snyder <br />
                        <div class="book_publish">February 28, 2017</div><br />
                        List Price：$11.00<br />
                        Price Online：$8.00 </dd>
                </dl>
                <!--CULTURE-->
                <dl id="book_culture" class="book_none">
                    <dt><img src="{{ url_for('static', filename='images/dd_history_1.jpg')}}" alt="history"/></dt>
                    <dd><div class="book_title">SAPIENS: A BRIEF HISTORY OF HUMANKIND</div><br />
                        by Yuval Noah Harari <br />
                        <div class="book_publish">May 10, 2016</div><br />
                        List Price：$23.00<br />
                        Price Online：$15.00 </dd>
                    <dt><img src="{{ url_for('static', filename='images/dd_history_2.jpg')}}" alt="history"/></dt>
                    <dd><div class="book_title">ON TYRANNY: TWENTY LESSONS FROM THE TWENTIETH CENTURY</div><br />
                        byTimothy Snyder <br />
                        <div class="book_publish">February 28, 2017</div><br />
                        List Price：$11.00<br />
                        Price Online：$8.00 </dd>
                    <dt><img src="{{ url_for('static', filename='images/dd_history_3.jpg')}}" alt="history"/></dt>
                    <dd><div class="book_title">DUNKIRK: THE HISTORY BEHIND THE MAJOR MOTION PICTURE</div><br />
                        byJoshua Levine<br />
                        <div class="book_publish"> June 27, 2017</div><br />
                        List Price：$21.00<br />
                        Price Online：$12.00 </dd>
                    <dt><img src="{{ url_for('static', filename='images/dd_history_4.jpg')}}" alt="history"/></dt>
                    <dd><div class="book_title">NO IS NOT ENOUGH:..</div><br />
                        byNaomi Klein<br />
                        <div class="book_publish">June 5, 2017</div><br />
                        List Price：$25.00<br />
                        Price Online：$20.00 </dd>
                </dl>
                <!--NOVEL-->
                <dl id="book_novel" class="book_none">
                    
                    <dt><img src="{{ url_for('static', filename='images/dd_history_3.jpg')}}" alt="history"/></dt>
                    <dd><div class="book_title">DUNKIRK: THE HISTORY BEHIND THE MAJOR MOTION PICTURE</div><br />
                        byJoshua Levine<br />
                        <div class="book_publish"> June 27, 2017</div><br />
                        List Price：$21.00<br />
                        Price Online：$12.00 </dd>
                    <dt><img src="{{ url_for('static', filename='images/dd_history_4.jpg')}}" alt="history"/></dt>
                    <dd><div class="book_title">NO IS NOT ENOUGH: RESISTING THE NEW SHOCK POLITICS AND WINNING..</div><br />
                        byNaomi Klein<br />
                        <div class="book_publish">June 5, 2017</div><br />
                        List Price：$25.00<br />
                        Price Online：$20.00 </dd>
						<dt><img src="{{ url_for('static', filename='images/dd_history_1.jpg')}}" alt="history"/></dt>
                    <dd><div class="book_title">SAPIENS: A BRIEF HISTORY OF HUMANKIND</div><br />
                        by Yuval Noah Harari <br />
                        <div class="book_publish">May 10, 2016</div><br />
                        List Price：$23.00<br />
                        Price Online：$15.00 </dd>
                    <dt><img src="{{ url_for('static', filename='images/dd_history_2.jpg')}}" alt="history"/></dt>
                    <dd><div class="book_title">ON TYRANNY: TWENTY LESSONS FROM THE TWENTIETH CENTURY</div><br />
                        byTimothy Snyder <br />
                        <div class="book_publish">February 28, 2017</div><br />
                        List Price：$11.00<br />
                        Price Online：$8.00 </dd>
                </dl>
            </div>
        </div>
        <!--MOST VIEWED-->
        <div class="book_sort">
            <div class="book_new">
                <div class="book_left">Most viewed</div>
            </div>
            <div class="book_class" style="height:380px;">
                <dl id="book_focus">
                    <dt><img src="{{ url_for('static', filename='images/dd_focus_1.jpg')}}" alt="focus"/></dt>
                    <dt><img src="{{ url_for('static', filename='images/dd_focus_2.jpg')}}" alt="focus"/></dt>
                    <dt><img src="{{ url_for('static', filename='images/dd_focus_3.jpg')}}" alt="focus"/></dt>
                    <dt><img src="{{ url_for('static', filename='images/dd_focus_4.jpg')}}" alt="focus"/></dt>
                    <dd><a href="#" class="blue">ANNE OF GREEN GABLES</a></dd>
                    <dd><a href="#" class="blue">PENGUIN MODERN CLASSICS LIVES OF GIRLS AND WOMEN</a></dd>
                    <dd><a href="#" class="blue">THE INCONVENIENT INDIAN:</a></dd>
                    <dd><a href="#" class="blue">BARNEY'S VERSION: PENGUIN MODERN CLASSICS EDITION</a></dd>
                    <dd>List Price：$9.99<br />
                        Price Online: $7.54</dd>
                    <dd>List Price：$20.00<br />
                        Price Online: $12.31</dd>
					<dd>List Price：$22.99<br />
                        Price Online: $17.54</dd>
					<dd>List Price：$22.00<br />
                        Price Online: $18.54</dd>
                    <dt><img src="{{ url_for('static', filename='images/dd_focus_1.jpg')}}" alt="focus"/></dt>
                    <dt><img src="{{ url_for('static', filename='images/dd_focus_2.jpg')}}" alt="focus"/></dt>
                    <dt><img src="{{ url_for('static', filename='images/dd_focus_3.jpg')}}" alt="focus"/></dt>
                    <dt><img src="{{ url_for('static', filename='images/dd_focus_4.jpg')}}" alt="focus"/></dt>
                    <dd><a href="#" class="blue">ANNE OF GREEN GABLES</a></dd>
                    <dd><a href="#" class="blue">PENGUIN MODERN CLASSICS LIVES OF GIRLS AND WOMEN</a></dd>
                    <dd><a href="#" class="blue">THE INCONVENIENT INDIAN:</a></dd>
                    <dd><a href="#" class="blue">BARNEY'S VERSION: PENGUIN MODERN CLASSICS EDITION</a></dd>
                    <dd>List Price：$9.99<br />
                        Price Online: $7.54</dd>
                    <dd>List Price：$20.00<br />
                        Price Online: $12.31</dd>
					<dd>List Price：$22.99<br />
                        Price Online: $17.54</dd>
					<dd>List Price：$22.00<br />
                        Price Online: $18.54</dd>
                </dl>
            </div>
        </div>
    </div>
    <!--MIDDLE END-->
    <!--RIGHT START-->
    <div id="silder">
        <!--Book Sale Info-->
        <div class="book_sort">
            <div class="book_sort_bg"><img src="{{ url_for('static', filename='images/dd_book_mess.gif')}}" alt="mess" style=" vertical-align:text-bottom;"/>Sale Info</div>
            <div class="book_class">
                <div id="dome">
                    <div id="dome1">
                        <ul id="express">
                            <li>·Children's Book 30% off</li>
                            <li>·Graphic Design Book 25% off </li>
                            <li>·History Book 30% off</li>
							<li>·Children's Book 30% off</li>
                            <li>·Graphic Design Book 25% off </li>
                            <li>·History Book 30% off</li>
							<li>·Children's Book 30% off</li>
                            <li>·Graphic Design Book 25% off </li>
                            <li>·History Book 30% off</li>
							<li>·Children's Book 30% off</li>
                            <li>·Graphic Design Book 25% off </li>
                            <li>·History Book 30% off</li>
							<li>·Children's Book 30% off</li>
                            <li>·Graphic Design Book 25% off </li>
                            <li>·History Book 30% off</li>
							<li>·Children's Book 30% off</li>
                            <li>·Graphic Design Book 25% off </li>
                            <li>·History Book 30% off</li>
                            
                        </ul>
                    </div>
                    <div id="dome2"></div>
                </div>
            </div>
            <div class="book_express_avder"> <img src="{{ url_for('static', filename='images/dd_book_right_adver1.jpg')}}" alt="adver" style="margin-bottom:5px;" /> <img src="{{ url_for('static', filename='images/dd_book_right_adver2.jpg')}}" alt="adver" /> </div>
        </div>
        <!--TOP LIST START-->
        <div class="book_sort">
            <div class="book_seven_title">Top Lists </div>
            <div class="book_seven_border">
                <div class="book_seven_top">
                    <ul id="book_seven_cate">
                        <li>HISTORY</li>
                        <li>NOVEL</li>
                        <li>KIDS</li>
                        <li>TRAVEL</li>
                        
                    </ul>
                </div>
                <div class="book_seven_content">
                    <div class="book_seven_content_left">
                        <dl id="book_seven_number">
                            <dt><img src="{{ url_for('static', filename='images/dd_book_no_01.gif')}}" alt="book"/></dt>
                            <dt><img src="{{ url_for('static', filename='images/dd_book_no_02.gif')}}" alt="book"/></dt>
                            <dt><img src="{{ url_for('static', filename='images/dd_book_no_03.gif')}}" alt="book"/></dt>
                            <dd><img src="{{ url_for('static', filename='images/dd_book_no_04.gif')}}" alt="book"/></dd>
                            <dd><img src="{{ url_for('static', filename='images/dd_book_no_05.gif')}}" alt="book"/></dd>
                            <dd><img src="{{ url_for('static', filename='images/dd_book_no_06.gif')}}" alt="book"/></dd>
                            <dd><img src="{{ url_for('static', filename='images/dd_book_no_07.gif')}}" alt="book"/></dd>
                            <dd><img src="{{ url_for('static', filename='images/dd_book_no_08.gif')}}" alt="book"/></dd>
                        </dl>
                    </div>
                    <div class="book_seven_content_right">
                        <!--TOP 8-->
                        <div id="book_seven_hearten">
                            <dl>
                                <dt><img src="{{ url_for('static', filename='images/dd_seven_hearten_01.jpg')}}" alt="hearten" /></dt>
                                <dd><a href="#" class="blue">DUNKIRK: THE HISTORY BEHIND THE MAJOR MOTION PICTURE</a><br />
                                    </dd>
                                <dt><img src="{{ url_for('static', filename='images/dd_seven_hearten_02.jpg')}}" alt="hearten" /></dt>
                                <dd><a href="#" class="blue">A BEAUTIFUL, TERRIBLE THING:A MEMOIR OF MARRIAGE AND..</a><br />
                                    </dd>
                                <dt><img src="{{ url_for('static', filename='images/dd_seven_hearten_03.jpg')}}" alt="hearten" /></dt>
                                <dd><a href="#" class="blue">DEVIL'S BARGAIN: STEVE BANNON, DONALD TRUMP, AND THE ..</a><br />
                                    </dd>
                            </dl>
                            <ul>
                                <li><a href="#" class="blue">LOVE HER WILD: POEMS</a></li>
                                <li><a href="#" class="blue">EVERYTHING ALL AT ONCE</a></li>
                                <li><a href="#" class="blue">PERENNIAL SELLER: THE..</a></li>
                                <li><a href="#" class="blue">MISSING MOTHER</a></li>
                                <li><a href="#" class="blue">DIANA:HER TRUE STORY</a></li>
                            </ul>
                        </div>
                        <!--TOP LIST END-->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--RIGHT END-->
    
</div>
<!--网站版权部分开始-->
<div id="footer">
    <div class="footer_top"><a href="#" target="_parent" class="footer_dull_red">Get to Know Us</a> | <a href="#" target="_parent" class="footer_dull_red">Make Money with Us</a> | <a href="#" target="_parent" class="footer_dull_red">Join Us</a> | <a href="#" target="_parent" class="footer_dull_red">Let Us Help You</a> | <a href="#" target="_parent" class="footer_dull_red">Conditions of Use</a></div>
</div>
<script>class Chatbox {
    constructor() {
        this.args = {
            openButton: document.querySelector('.chatbox__button'),
            chatBox: document.querySelector('.chatbox__support'),
            sendButton: document.querySelector('.send__button')
        }

        this.state = false;
        this.messages = [];
    }

    display() {
        const {openButton, chatBox, sendButton} = this.args;

        openButton.addEventListener('click', () => this.toggleState(chatBox))

        sendButton.addEventListener('click', () => this.onSendButton(chatBox))

        const node = chatBox.querySelector('input');
        node.addEventListener("keyup", ({key}) => {
            if (key === "Enter") {
                this.onSendButton(chatBox)
            }
        })
    }

    toggleState(chatbox) {
        this.state = !this.state;

        // show or hides the box
        if(this.state) {
            chatbox.classList.add('chatbox--active')
        } else {
            chatbox.classList.remove('chatbox--active')
        }
    }

    onSendButton(chatbox) {
        var textField = chatbox.querySelector('input');
        let text1 = textField.value
        if (text1 === "") {
            return;
        }

        let msg1 = { name: "User", message: text1 }
        this.messages.push(msg1);

        fetch('http://127.0.0.1:5000/predict', {
            method: 'POST',
            body: JSON.stringify({ message: text1 }),
            mode: 'cors',
            headers: {
              'Content-Type': 'application/json'
            },
          })
          .then(r => r.json())
          .then(r => {
            let msg2 = { name: "Sam", message: r.answer };
            this.messages.push(msg2);
            this.updateChatText(chatbox)
            textField.value = ''

        }).catch((error) => {
            console.error('Error:', error);
            this.updateChatText(chatbox)
            textField.value = ''
          });
    }

    updateChatText(chatbox) {
        var html = '';
        this.messages.slice().reverse().forEach(function(item, index) {
            if (item.name === "Sam")
            {
                html += '<div class="messages__item messages__item--visitor">' + item.message + '</div>'
            }
            else
            {
                html += '<div class="messages__item messages__item--operator">' + item.message + '</div>'
            }
          });

        const chatmessage = chatbox.querySelector('.chatbox__messages');
        chatmessage.innerHTML = html;
    }
}


const chatbox = new Chatbox();
chatbox.display();</script>
 <script>
        $SCRIPT_ROOT = {{ request.script_root|tojson }};
    </script>
    <script type="text/javascript" src="{{ url_for('static', filename='app.js') }}"></script>

 <script type="text/javascript" src="{{ url_for('static', filename='book.js') }}"></script>
  <script type="text/javascript" src="{{ url_for('static', filename='shopping.js') }}"></script>
</body>
</html>
